<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width" , initial-scale="1.0">
    <title>
        Users
    </title>
    <link rel="icon" href="/static/logo.png" type="image/icon type">
    <script src="https://code.jquery.com/jquery-3.7.1.slim.js"
        integrity="sha256-UgvvN8vBkgO0luPSUl2s8TIlOSYRoGFAX4jlCIm9Adc=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/static/css/userlist.css">
    <script src="../static/js/userlist.js"></script>
</head>

<body>
    <div class="main">
        <div class="navbar">
            <nav class='sidebar sidebar-menu-collapsed'>
                <div class="icon">
                    <h2 class="logo">SCMxpert</h2>
                </div>
                <ul>
                    <li><a href="/admin">Dashboard</a></li>
                    <li><a href="/devicedata">Device Data</a></li>
                    <li><a href="/shipment">Shipments</a></li>
                    <li class="active"><a href="/userlist">Users</a></li>
                    <li><a href="/adminacc">My Account</a></li>
                    <li><a href="#" onclick="logout()">Logout</a></li>
            </nav>
        </div>


        <!-- ----------------------------------------------- -->
        <div id="successMessage"></div>
        
        <div class="user">
            <h1>
                Users List
            </h1>
            <input class="select" type="text" id="username" placeholder="Search by Username">
            <button class="src" id="submit">Search</button>

        </div>
        <div class="tb">
            <table>
                <thead>
                    <tr id="header">
                        <th>Select</th>
                        <th>Username</th>
                        <th>Email</th>
                    </tr>
                </thead>
                <tbody id="tablebody">

                    {% for user in data %}
                    <tr>
                        <td><input type="checkbox" class="user-checkbox"></td>
                        <td class="username">{{ user.username }}</td>
                        <td id="email_id">{{ user.email }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div>
                <button class="btn" id="makeAdmin">Make Admin</button>
            </div>
        </div>
        <p id="value" style="display: none;">{{token}}</p>
        <script>
            function logout() {
                // Clear user-related data from localStorage
                localStorage.removeItem("token");
                sessionStorage.removeItem("username");
                sessionStorage.removeItem("email");
                sessionStorage.removeItem("role");

                // Redirect to the login page or any other desired destination
                window.location.href = "/login";
            }
        </script>
</body>

</html>
